<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="AndyShop - Gestion de vente multi-boutiques">
    <meta name="theme-color" content="#6366f1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <title>AndyShop - Gestion Multi-Boutiques</title>

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="assets/img/logo-default.png">

    <!-- CSS -->
    <link rel="stylesheet" href="css/variables.css">
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/layout.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/screens.css">
</head>
<body>
    <!-- Structure globale de l'application -->

    <!-- Header (titre + actions contextuelles) -->
    <header id="app-header" class="app-header">
        <button id="back-btn" class="header-btn header-btn--back" style="display: none;">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M19 12H5M12 19l-7-7 7-7"/>
            </svg>
        </button>
        <h1 id="header-title" class="header-title">AndyShop</h1>
        <button id="sync-btn" class="header-btn header-btn--sync">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M23 4v6h-6M1 20v-6h6"/>
                <path d="M3.51 9a9 9 0 0114.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0020.49 15"/>
            </svg>
        </button>
    </header>

    <!-- Contenu principal (écrans dynamiques) -->
    <main id="app-main" class="app-main">
        <!-- Le contenu sera injecté dynamiquement par le routeur -->
        <div class="loader">
            <div class="loader-spinner"></div>
            <p>Chargement...</p>
        </div>
    </main>

    <!-- Bottom Navigation (mobile) -->
    <nav id="bottom-nav" class="bottom-nav">
        <a href="#/home" class="nav-item active" data-screen="home">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/>
                <path d="M9 22V12h6v10"/>
            </svg>
            <span>Accueil</span>
        </a>
        <a href="#/vente" class="nav-item" data-screen="vente">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="9" cy="21" r="1"/>
                <circle cx="20" cy="21" r="1"/>
                <path d="M1 1h4l2.68 13.39a2 2 0 002 1.61h9.72a2 2 0 002-1.61L23 6H6"/>
            </svg>
            <span>Vente</span>
        </a>
        <a href="#/paiement" class="nav-item" data-screen="paiement">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="1" y="4" width="22" height="16" rx="2" ry="2"/>
                <line x1="1" y1="10" x2="23" y2="10"/>
            </svg>
            <span>Encaisser</span>
        </a>
        <a href="#/stocks" class="nav-item" data-screen="stocks">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 16V8a2 2 0 00-1-1.73l-7-4a2 2 0 00-2 0l-7 4A2 2 0 003 8v8a2 2 0 001 1.73l7 4a2 2 0 002 0l7-4A2 2 0 0021 16z"/>
                <path d="M3.27 6.96L12 12.01l8.73-5.05M12 22.08V12"/>
            </svg>
            <span>Stocks</span>
        </a>
        <a href="#/plus" class="nav-item" data-screen="plus">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="1"/>
                <circle cx="12" cy="5" r="1"/>
                <circle cx="12" cy="19" r="1"/>
            </svg>
            <span>Plus</span>
        </a>
    </nav>

    <!-- Toast container (notifications) -->
    <div id="toast-container" class="toast-container"></div>

    <!-- Modal container (pour les modales réutilisables) -->
    <div id="modal-container" class="modal-container"></div>

    <!-- Scripts -->
    <!-- Diagnostic (à retirer après debug) -->
    <script src="js/diagnostic.js"></script>

    <!-- Configuration (charge depuis config.js en local OU depuis env vars sur Vercel) -->
    <script src="js/config.js" onerror="console.log('config.js non trouvé (normal sur Vercel)')"></script>
    <script src="js/env-config.js" onerror="console.log('env-config.js non trouvé (normal en local)')"></script>
    <script src="js/config-loader.js"></script>

    <!-- Utilitaires -->
    <script src="js/utils/constants.js"></script>
    <script src="js/utils/helpers.js"></script>

    <!-- Services -->
    <script src="js/services/airtable.js"></script>
    <script src="js/services/storage.js"></script>
    <script src="js/services/whatsapp.js"></script>
    <script src="js/services/pdf.js"></script>
    <script src="js/services/analytics.js"></script>
    <script src="js/services/googledrive.js"></script>

    <!-- Modèles -->
    <script src="js/models/boutique.js"></script>
    <script src="js/models/fournisseur.js"></script>
    <script src="js/models/article.js"></script>
    <script src="js/models/lot.js"></script>
    <script src="js/models/client.js"></script>
    <script src="js/models/vente.js"></script>
    <script src="js/models/paiement.js"></script>
    <script src="js/models/dette.js"></script>
    <script src="js/models/relance.js"></script>

    <!-- UI -->
    <script src="js/ui/components.js"></script>
    <script src="js/ui/forms.js"></script>
    <script src="js/ui/router.js"></script>

    <!-- Écrans -->
    <script src="js/ui/screens/home.js"></script>
    <script src="js/ui/screens/vente.js"></script>
    <script src="js/ui/screens/paiement.js"></script>
    <script src="js/ui/screens/clients.js"></script>
    <script src="js/ui/screens/client-detail.js"></script>
    <script src="js/ui/screens/stocks.js"></script>
    <script src="js/ui/screens/lots.js"></script>
    <script src="js/ui/screens/articles.js"></script>
    <script src="js/ui/screens/dettes.js"></script>
    <script src="js/ui/screens/rapports.js"></script>
    <script src="js/ui/screens/plus.js"></script>

    <!-- Point d'entrée -->
    <script src="js/app.js"></script>
</body>
</html>
